<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>My comments run on email | Charalampos Kardaris</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="My comments run on email" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My website comments setup using email as the backend." />
<meta property="og:description" content="My website comments setup using email as the backend." />
<link rel="canonical" href="https://ckardaris.github.io/blog/2026/01/22/my-comments-run-on-email.html" />
<meta property="og:url" content="https://ckardaris.github.io/blog/2026/01/22/my-comments-run-on-email.html" />
<meta property="og:site_name" content="Charalampos Kardaris" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-01-22T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="My comments run on email" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2026-01-22T00:00:00+00:00","datePublished":"2026-01-22T00:00:00+00:00","description":"My website comments setup using email as the backend.","headline":"My comments run on email","mainEntityOfPage":{"@type":"WebPage","@id":"https://ckardaris.github.io/blog/2026/01/22/my-comments-run-on-email.html"},"url":"https://ckardaris.github.io/blog/2026/01/22/my-comments-run-on-email.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://ckardaris.github.io/feed.xml" title="Charalampos Kardaris" /><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon16.png">
<link rel="manifest" href="/site.webmanifest">
</head>
<body><main class="page-content" aria-label="Content">
  <div class="wrapper">
    <header class="post-header">
      <h1 class="post-title p-name" itemprop="name headline">My comments run on email</h1></header><div class="post-meta">
        <time class="dt-published" datetime="2026-01-22T00:00:00+00:00" itemprop="datePublished">Jan 22, 2026
</time>
on
<a href=/blog>Charalampos Kardaris' blog</a>

      </div>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="post-content e-content" itemprop="articleBody">
    <p>Not all blogs support commenting.
Initially, I considered doing without them.
There are many places where one may share an article or blog post and start a discussion.
I frequent <a href="https://news.ycombinator.com/news"><em>Hacker News</em></a><sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> myself and I really appreciate the
breadth of opinions in some of the discussions.
Discussion can happen in other <em>spaces</em> as well, like <em>Reddit</em>, <em>LinkedIn</em><sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup> and many more.</p>

<p>Despite the abundance of such <em>spaces</em>, where discussions can happen, I think it is convenient and
fitting — especially for blog posts — when the actual post and the readers’ comments live
together.</p>

<p>With that in mind, and feeling the urge to <a href="/blog/2026/01/10/techrastination.html">hack a little more on my website</a>, during the past weekend I set out to add support for comments in
this blog.</p>

<p>Doing so in a static blog poses a big <strong>challenge</strong>.
There is no actual server running that can handle requests and process data.
That means that you do not have the necessary infrastructure for user accounts.
The readers cannot log in and send their comments and there is no straightforward way to take those
comments and automatically post them online.</p>

<p>Another method is therefore needed to receive the comments and provide them as input to the static
site generator, in my case <a href="https://jekyllrb.com/">jekyll</a>.</p>

<p>One of the most frequently used solutions to this problem is <a href="https://giscus.app/">giscus</a>.
<em>giscus</em> is utilizing <em>GitHub</em> discussions to store comments for the different blog posts and can be
configured to automatically update your website when a new comment is created.</p>

<p>This approach is very appealing, but it has one disadvantage in my opinion.
The person who wants to comment needs to have a <em>GitHub</em> account.
This can be a blocker for non-technical people.</p>

<p>I wanted to use a different approach and I also wanted to make commenting accessible to as many
people as possible.
After some thinking I decided to use the most common technology I could think of.</p>

<p><strong>Email.</strong></p>

<p>Almost everyone using the internet has an email address.
By basing my comment system on email, I can make it accessible to a wide range of people.</p>

<p>The fact that every email address is unique allows to implement a kind of primitive authentication
setup.
I am saying primitive, because email is not secure by default, and by extension neither is any
system built on top of it.</p>

<p>It goes without saying that this system could never be used in production in security-sensitive
environments. That said, crazier things have happened.</p>

<h1 id="technical-overview">Technical overview</h1>

<p>At this point, it would be useful to go in a little more detail.
If you are not interested in the technical aspects of the comment system implementation you can skip
this section and go straight to the <a href="#final-thoughts">end</a>. You will miss all the fun, though.</p>

<p>So, how does it all work?</p>

<h2 id="requirements">Requirements</h2>

<p>Before implementing the comment system, I drafted some requirements:</p>

<ol>
  <li>All comments should be displayed with a visible <em>name</em><sup id="fnref:3"><a href="#fn:3" class="footnote" rel="footnote" role="doc-noteref">3</a></sup> selected by the commenter and the
<em>date</em> they were made.</li>
  <li>A commenter should be able to change their visible <em>name</em>.</li>
  <li>A malicious actor should not be able<sup id="fnref:4"><a href="#fn:4" class="footnote" rel="footnote" role="doc-noteref">4</a></sup> to assume the identity of a commenter.</li>
  <li>Sending a comment should be as easy as possible and the comment system should be functional with
<em>JavaScript</em> disabled.</li>
  <li>Comment replies should be supported and presented in a nested tree structure, which should
support collapse and expansion of comment sub-trees.</li>
</ol>

<h2 id="data">Data</h2>

<p>The comment system is based on email, so it is logical that you send a comment by sending an email.
Every comment email contains all necessary information, so that the comment can be presented
correctly.
I decided to send the information in the <em>YAML</em> format, since <em>jekyll</em> is <em>YAML</em>-friendly.
Additionally, <em>YAML</em> compared to <em>JSON</em> can be more readable for multi-line data, like comments, so
it made it more fitting for this use case.</p>

<p>Every comment email sends in its body the following information.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">post</span><span class="pi">:</span>
<span class="na">name</span><span class="pi">:</span>
<span class="na">password</span><span class="pi">:</span>
<span class="na">repliesTo</span><span class="pi">:</span>
<span class="na">comment</span><span class="pi">:</span> <span class="pi">|-</span>
</code></pre></div></div>

<p>Sending passwords in plain text is almost always frowned upon.
But I believe this situation deserves some leeway.</p>

<ul>
  <li>The data transferred is not sensitive and proper care is taken to ensure confidentiality.</li>
  <li>This is an educational project with no hard security requirements.</li>
  <li>A password is good to be used as a measure against <a href="https://en.wikipedia.org/wiki/Email_spoofing">sender address
spoofing</a>.</li>
  <li>Email can always be hardened by using <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy"><em>PGP
encryption</em></a><sup id="fnref:5"><a href="#fn:5" class="footnote" rel="footnote" role="doc-noteref">5</a></sup>:</li>
</ul>

<p>Upon receiving a comment email, some additional information can be obtained: <code class="language-plaintext highlighter-rouge">email_address</code> and <code class="language-plaintext highlighter-rouge">date</code>.</p>

<h2 id="implementation">Implementation</h2>

<p>Let’s see how we can satisfy the system requirements with these data.</p>

<blockquote>
  <p>All comments should be displayed with a visible name selected by the commenter and the
   <em>date</em> they were made.</p>
</blockquote>

<p>For this we use the <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">date</code> information from the actual comment email.</p>

<blockquote>
  <p>A commenter should be able to change their visible name.<br />
A malicious actor should not be able to easily assume the identity of a commenter.</p>
</blockquote>

<p>All information needed to generate this website is publicly stored in a <em>GitHub</em> repository.
This means that any personal information needs to be properly stored.</p>

<p>For each received comment email a <a href="https://en.wikipedia.org/wiki/SHA-2"><em>SHA256</em></a> message digest
(<em>hash</em>) is computed using the <code class="language-plaintext highlighter-rouge">email_address</code> and a
<a href="https://en.wikipedia.org/wiki/Salt_%28cryptography%29"><em>salt</em></a><sup id="fnref:7"><a href="#fn:7" class="footnote" rel="footnote" role="doc-noteref">6</a></sup>.</p>

<p>To check <em>name</em> availability, all <em>email hashes</em> that are <strong>different</strong> from the current one are
gathered and their linked <em>name</em> is compared to the requested one.
If no matches are found the <code class="language-plaintext highlighter-rouge">name</code> can be used.</p>

<p>An additional message digest is computed for the authentication of the commenter using the
<code class="language-plaintext highlighter-rouge">email_address</code>, the <code class="language-plaintext highlighter-rouge">password</code> and the <em>salt</em>.</p>

<p>This <em>authentication hash</em> is compared against the <em>authentication hash</em> of one of previous comment
emails that share the <strong>same</strong> <em>email hash</em><sup id="fnref:8"><a href="#fn:8" class="footnote" rel="footnote" role="doc-noteref">7</a></sup>.</p>

<p>In the event of any error, the commenter is informed with a response email.</p>

<blockquote>
  <p>Sending a comment should be as easy as possible and the comment system should be functional with
   <em>JavaScript</em> disabled.</p>
</blockquote>

<p>Commenters with <em>JavaScript</em> enabled can enjoy a streamlined user experience (UX).
Clicking on <u>add comment</u> or <u>reply</u> presents them with an <em>HTML</em> form with three input
fields: <em>name</em>, <em>password</em> and <em>comment</em>.
After filling them and clicking the <em>send</em> button, their preferred email client is launched and the
message is pre-filled for them and ready to be sent.</p>

<p>Commenters with <em>JavaScript</em> disabled still get a pre-filled email message, but they have to fill
the necessary information, while making sure to not break the formatting of the data.</p>

<p>Writing a comment using the <em>HTML</em> form with <em>JavaScript</em> enabled has two benefits:</p>

<ol>
  <li>Browsers are able to save the <em>name</em> and <em>password</em> fields for the commenter and pre-fill them in
the future.</li>
  <li>The password can be hashed in the email body. This does not improve security, but
protects against curious eyes.</li>
</ol>

<blockquote>
  <p>Comment replies should be supported and presented in a nested tree structure, which should
   support collapse and expansion of comment sub-trees.</p>
</blockquote>

<p>Using the <code class="language-plaintext highlighter-rouge">repliesTo</code> field of the comment email<sup id="fnref:9"><a href="#fn:9" class="footnote" rel="footnote" role="doc-noteref">8</a></sup>, a tree hierarchy of messages is created.
This hierarchy is used to sort the comments properly and to create the necessary logic to collapse
and expand the respective sub-trees of comments.</p>

<h2 id="synchronization">Synchronization</h2>

<p>We are close to the end, but I have so far failed to mention one basic characteristic of the comment
system.
And this concerns its responsiveness, or lack thereof.</p>

<p>After receiving a comment email, there is, as of now, no automation set up to process the email and
post it on the blog.
Posting each comment requires manual intervention.
This makes the discussion asynchronous.
I think that this is not a big issue and does not look out of place considering the static nature of
the website.</p>

<p>Nevertheless, I leave the door open to automation.
Interacting with email is scriptable with programs like <a href="https://marlam.de/msmtp/"><em>msmtp</em></a>
and <a href="https://isync.sourceforge.io/"><em>isync</em></a>.
In the unlikely but welcome scenario that the volume of the received comment emails is too large to
handle manually, another weekend hacking project could automate the whole process.</p>

<h1 id="final-thoughts">Final thoughts</h1>

<p>Creating a comment system based on email has been a worthwhile experience.
I revisited some long-studied concepts and learned new ones.
It was a good exercise in balancing trade-offs which I believe is one of the most important aspects
of designing a system.</p>

<p>The final result leaves me satisfied, while also leaving room for improvements in the future.</p>

<p>And after all this work, I can finally say</p>
<blockquote>
  <p>Let me know what you think in the comments.</p>
</blockquote>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>The user interface (UI) of my comments is <em>heavily</em> inspired by HN comments. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Even if too <em>corporatey</em> most of the time. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Or <em>nickname</em>. <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>Although, you can never be 100% secure. <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>Here is the <a href="/pgp-public-key.txt">PGP public key</a>. <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:7">
      <p>Storing message digests of <em>salted</em> data guarantees that, even though all stored data is
publicly available, it is not possible to find out which email addresses are stored and what
<em>name</em> each email is using. <a href="#fnref:7" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:8">
      <p>If any, the rest of the comments from the same email address have the same <em>authentication
hash</em>. <a href="#fnref:8" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:9">
      <p>Root messages, of course, do not set this value. <a href="#fnref:9" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div><div class="tags">
    Tags:
    
      <a href="/blog/tags/programming" class="tag">programming</a>
    
      <a href="/blog/tags/website" class="tag">website</a>
    
  </div><div class="comments">
  <div class="top">
   <span class="title">Comments:</span>
   <input type="checkbox" id="reply-" class="reply-input">
   
<noscript>
    <a class="action reply-label" tabindex="0" href=mailto:ckardaris.github.io@gmail.com?subject=Comment:%20My%20comments%20run%20on%20email&body=post:%20/blog/2026/01/22/my-comments-run-on-email%0A%23%20The%20name%20will%20be%20linked%20to%20your%20email%20address.%0A%23%20If%20you%20change%20your%20name,%20your%20old%20name%20will%20be%20replaced%20in%20all%20comments.%0Aname:%0A%23%20The%20password%20is%20used%20to%20authenticate%20against%20your%20email%20address.%0A%23%20The%20password%20is%20linked%20to%20your%20email%20address%20after%20your%20first%20comment.%0A%23%20After%20the%20first%20comment,%20you%20have%20to%20keep%20using%20the%20same%20password.%0A%23%20The%20password%20is%20sent%20in%20plaintext%20over%20email.%0A%23%20If%20you%20want%20extra%20security,%20you%20can%20encrypt%20this%20email%20using%20the%20public%20key%0A%23%20found%20at%20https://ckardaris.github.io/pgp-public-key.txt%0Apassword:%0Acomment:%20%7C-%0A%20%20%23%20The%20comment%20can%20be%20markdown%20text.%0A%20%20%23%20Write%20your%20comment%20under%20this%20line.%20Align%20it%20with%20the%20'%23'%20character.
>add comment</a>
</noscript>
<label class="action reply-label hidden-no-js" tabindex="0" for="reply-">add comment</label>
<form id="comment-form-" class="comment-form">

  <details>
    <summary>Name or nickname</summary>
    <span class="content">
      The name will be linked to your email address.<br>
      If you change your name, your old name will be replaced in all comments.
    </span>
  </details>
  <input type="text" id="username-" class="input" required>
  <br>

  <details>
    <summary>Password</summary>
    <span class="content">
      The password is used to authenticate against your email address.<br>
      The password is linked to your email address after your first comment.<br>
      After the first comment, you have to keep using the same password.<br>
      The password is sent in plaintext over email.<br>
      If you want extra security, you can encrypt your messages using this
      <a href="/pgp-public-key.txt">public key</a>.
    </span>
  </details>
  <input type="password" id="password-" class="input" required>
  <input type="checkbox" id="eye-" class="eye-input">
  <label for="eye-" tabindex="0" class="action">
    <span class="eye"><svg height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="256" cy="256" r="64"/><path d="m394.82 141.18c-43.72-29.98-90.51-45.18-139.06-45.18-43.69 0-86.28 13-126.59 38.48-40.65 25.75-80.5 72.52-113.17 121.52 26.42 44 62.56 89.24 100.2 115.18 43.18 29.74 90.13 44.82 139.56 44.82 49 0 95.85-15.07 139.3-44.79 38.25-26.21 74.65-71.39 100.94-115.21-26.38-43.43-62.9-88.56-101.18-114.82zm-138.82 210.82a96 96 0 1 1 96-96 96.11 96.11 0 0 1 -96 96z"/></svg></span>
    <span class="eye-off"><svg height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m240.44.03h31.11v511.95h-31.11z" transform="matrix(.70710678 -.70710678 .70710678 .70710678 -106.04 256)"/><path d="m259.34 192.09 60.57 60.57a64.07 64.07 0 0 0 -60.57-60.57z"/><path d="m252.66 319.91-60.57-60.57a64.07 64.07 0 0 0 60.57 60.57z"/><path d="m256 352a96 96 0 0 1 -92.6-121.34l-69.07-69.08c-28.21 25.84-55.09 59.56-78.33 94.42 26.42 44 62.56 89.24 100.2 115.18 43.18 29.74 90.13 44.82 139.56 44.82a233.47 233.47 0 0 0 79.24-13.8l-53.61-53.6a95.84 95.84 0 0 1 -25.39 3.4z"/><path d="m256 160a96 96 0 0 1 92.6 121.34l70.66 70.66c29.15-26.25 56.07-61.56 76.74-96-26.38-43.43-62.9-88.56-101.18-114.82-43.72-29.98-90.51-45.18-139.06-45.18a222.92 222.92 0 0 0 -78.21 14.29l53.11 53.11a95.84 95.84 0 0 1 25.34-3.4z"/></svg></span>
  </label>
  <br>

  <details>
    <summary>Comment</summary>
    <span class="content">
      The comment can be markdown text.
    </span>
  </details>
  <textarea id="comment-input-" class="input" required></textarea><br>
  <button
    type="submit"
    tabindex="0"
    onclick="sendEmail()"
  >send comment via email</button>
  <label class="action" tabindex="0" for="reply-" id="cancel-reply-label-">cancel</label>
</form>

  </div>
  <div class="content">
    
    
    No comments to show.
    
  </div>
</div>
<script>
async function sha256(str) {
    const data = new TextEncoder().encode(str);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    return [...new Uint8Array(hashBuffer)]
        .map(b => b.toString(16).padStart(2, "0"))
        .join("");
}

async function sendEmail(replyId = "") {
    const form = document.getElementById(`comment-form-${replyId}`);
    if (!form.checkValidity()) {
        return;
    }
    const username = document.getElementById(`username-${replyId}`).value.trim();
    const comment = document.getElementById(`comment-input-${replyId}`).value.trim();
    const password = await sha256(document.getElementById(`password-${replyId}`).value.trim());

    const subject = "Comment: My comments run on email";
    let body = `post: /blog/2026/01/22/my-comments-run-on-email`;
    body += replyId ? `\nrepliesTo: ${replyId}` : "";
    body += `
name: ${username}
password: ${password}
comment: |-
${comment.split('\n').map(line => "  " + line).join('\n')}
`;
    const mailto = "mailto:ckardaris.github.io@gmail.com?subject=" + encodeURIComponent(subject) + "&Whatever&body=" + encodeURIComponent(body);
    window.open(mailto, "_blank");
}

</script>

<script>
document.querySelectorAll('.eye-input').forEach(el => {
    el.addEventListener('change', function() {
        this.previousElementSibling.type = this.checked ? 'text' : 'password';
    })
});

</script>

<style>


</style>



  <a class="u-url" href="/blog/2026/01/22/my-comments-run-on-email.html" hidden></a>
</article>

<script>
// https://remarkablemark.org/blog/2021/06/01/add-copy-code-to-clipboard-button-to-jeyll-site/
document.querySelectorAll('pre.highlight').forEach(codeBlock => {
    var copyButton = document.createElement('button');
    copyButton.type = 'button';
    copyButton.ariaLabel = 'Copy code to clipboard';
    copyButton.innerText = 'Copy';

    codeBlock.append(copyButton);

    copyButton.addEventListener('click', function() {
        var code = codeBlock.querySelector('code').innerText.trim();
        window.navigator.clipboard.writeText(code);

        copyButton.innerText = 'Copied';

        setTimeout(function() {
            copyButton.blur();
            setTimeout(function() {
                copyButton.innerText = 'Copy';
            }, 250);
        }, 4000);
    });
});

</script>


  </div>
</main>

<script>
// Unhide all elements that require JS to work properly.
document.querySelectorAll('.hidden-no-js').forEach(el => {
    el.classList.remove('hidden-no-js');
});

</script>

</body>
</html>
